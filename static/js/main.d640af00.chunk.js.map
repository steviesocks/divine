{"version":3,"sources":["../node_modules/@stencil/core/internal/client lazy /^/.//.*$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","data.js","utils.js","Popup.js","MapView.js","App.js","reportWebVitals.js","theme.js","index.js"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","simpleMarkerSymbol","type","color","outline","width","featureServiceLayerUrl","authentication","ApiKey","key","process","pointsRenderer","pointsLabels","symbol","haloColor","haloSize","font","size","family","style","weight","labelPlacement","labelExpressionInfo","expression","popupPoints","Popup","pointRef","featureLayer","onClose","hasPoint","useState","values","setValues","point","current","Box","tag","direction","align","justify","background","pad","vertical","horizontal","elevation","Heading","Paragraph","Form","value","onChange","nextValue","onReset","onSubmit","event","preventDefault","featureToAdd","attributes","uuidv4","name","note","geometry","x","longitude","y","latitude","spatialReference","wkid","console","log","addFeatures","url","data","features","response","addResults","success","refresh","FormField","htmlFor","required","TextInput","placeholder","TextArea","resize","gap","Button","label","disabled","onClick","Text","textAlign","toFixed","Map","mapContainer","useRef","view","map","graphicsLayer","clickPoint","listeners","showPointEditor","setShowPointEditor","setHasPoint","removePoint","remove","handleClick","mapPoint","coordinates","Graphic","add","useEffect","WebMap","portalItem","MapView","container","center","zoom","when","GraphicsLayer","FeatureLayer","renderer","labelingInfo","outFields","popupTemplate","layers","addLayers","error","destroy","undefined","height","margin","left","position","ref","top","right","layerViews","items","pop","listener","on","push","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","grommetTheme","global","colors","text","light","primary","edgeSize","small","medium","button","border","radius","padding","extend","props","rgba","normalizeColor","colorValue","theme","esriConfig","apiKey","ReactDOM","render","StrictMode","Grommet","document","getElementById"],"mappings":"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","file":"static/js/main.d640af00.chunk.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 454;","export const popupTemplate = {\n  title: \"{Name}\",\n  content: \"{Description}\",\n};\nexport const attributes = {\n  Name: \"Graphic\",\n  Description: \"I am a polygon\",\n};\n\nexport const point = {\n  type: \"point\",\n  longitude: -110.30512354972593,\n  latitude: 40.792249423721735,\n};\n\nexport const simpleMarkerSymbol = {\n  type: \"simple-marker\",\n  color: [226, 119, 40], // Orange\n  outline: {\n    color: [255, 255, 255], // White\n    width: 1,\n  },\n};\n\nexport const polyline = {\n  type: \"polyline\",\n  paths: [\n    [-110.30461, 40.79194], //Longitude, latitude\n    [-110.30158, 40.79258], //Longitude, latitude\n    [-110.29881, 40.79104],\n    [-110.29646, 40.78815],\n    [-110.29454, 40.78815], //Longitude, latitude\n  ],\n};\nexport const simpleLineSymbol = {\n  type: \"simple-line\",\n  color: [226, 119, 40], // Orange\n  width: 2,\n};\n\nexport const simpleFillSymbol = {\n  type: \"simple-fill\",\n  color: [227, 139, 79, 0.3], // Orange, opacity 80%\n  outline: {\n    color: [255, 255, 255],\n    width: 1,\n  },\n};\n\nexport const polygon = {\n  type: \"polygon\",\n  rings: [\n    [-110.30461, 40.79194], //Longitude, latitude\n    [-110.30158, 40.79258], //Longitude, latitude\n    [-110.29881, 40.79104],\n    [-110.29646, 40.78815],\n    [-110.29454, 40.78815],\n  ],\n};\n\nexport const featureServiceLayerUrl = \"https://services3.arcgis.com/cVS7R33dvMF3bt2i/arcgis/rest/services/uinta_highline/FeatureServer/0\";\n","import Graphic from \"@arcgis/core/Graphic\";\nimport * as data from './data';\nimport { ApiKey } from \"@esri/arcgis-rest-auth\";\n\n\nexport const authentication = new ApiKey({\n  key: process.env.REACT_APP_API_KEY,\n});\n\nexport const addTempPoint = (coordinates, graphicsLayer) => {\n    const tempPoint = new Graphic({\n      geometry: {\n        type: \"point\",\n        longitude: coordinates.longitude,\n        latitude: coordinates.latitude,\n      },\n      symbol: data.simpleMarkerSymbol,\n    });\n    graphicsLayer.add(tempPoint);\n    return tempPoint;\n  };\n\n  export const removeTempPoint = (tempPoint, graphicsLayer) => {\n    graphicsLayer.remove(tempPoint);\n  };\n\n  export const pointsRenderer = {\n    \"type\": \"simple\",\n    \"symbol\": {\n      \"type\": \"picture-marker\",\n      \"url\": \"http://static.arcgis.com/images/Symbols/NPS/npsPictograph_0231b.png\",\n      \"width\": \"18px\",\n      \"height\": \"18px\"\n    }\n  };\n\n  export const pointsLabels = {\n    symbol: {\n      type: \"text\",\n      color: \"#FFFFFF\",\n      haloColor: \"#5E8D74\",\n      haloSize: \"2px\",\n      font: {\n        size: \"12px\",\n        family: \"Noto Sans\",\n        style: \"italic\",\n        weight: \"normal\"\n      }\n    },\n\n    labelPlacement: \"above-center\",\n    labelExpressionInfo: {\n      expression: \"$feature.name\"\n    }\n  };\n\n  export const popupPoints = {\n    \"title\": \"Waypoint\",\n    \"content\": \"<b>Waypoint:</b> {name}<br><b>Notes:</b> {note}\"\n  }\n\n    // const pointGraphic = new Graphic({\n    //   geometry: point,\n    //   symbol: simpleMarkerSymbol,\n    // });\n    // graphicsLayer.add(pointGraphic);\n\n    // const polylineGraphic = new Graphic({\n    //   geometry: polyline,\n    //   symbol: simpleLineSymbol,\n    // });\n    // graphicsLayer.add(polylineGraphic);\n\n    // const polygonGraphic = new Graphic({\n    //   geometry: polygon,\n    //   symbol: simpleFillSymbol,\n    //   attributes,\n    //   popupTemplate,\n    // });\n    // graphicsLayer.add(polygonGraphic);\n\n    // const authentication = new ApiKey({\n    //   key: process.env.REACT_APP_API_KEY,\n    // });\n\n    // addFeatures({\n    //   url: data.featureServiceLayerUrl,\n    //   features: [data.featureToAdd],\n    //   authentication,\n    // }).then(handleAdded);\n\n    // function handleAdded(response) {\n    //     console.log('added', response);\n\n    //     if (!response.addResults[0].success) {\n    //       // stop early if adding a new feature was not successful\n    //       return;\n    //     }\n\n    //     const featureToUpdate = {\n    //         attributes: {\n    //           objectId: response.addResults[0].objectId,\n    //           name: 'new name',\n    //           rating: '3'\n    //         }\n    //       };\n\n    //     updateFeatures({\n    //         url: data.featureServiceLayerUrl,\n    //         features: [featureToUpdate],\n    //         authentication\n    //       })\n    //         .then(handleUpdated);\n\n    // }\n\n    // function handleUpdated(response) {\n    //     console.log(response);\n\n    //     if (!response.updateResults[0].success) {\n    //       // stop early if updating the feature was not successful\n    //       return;\n    //     }\n\n    //     // delete the feature using the objectId of the updated feature\n    //     const featureToDelete = [response.updateResults[0].objectId];\n\n    //     deleteFeatures({\n    //       url: data.featureServiceLayerUrl,\n    //       objectIds: [featureToDelete],\n    //       authentication\n    //     })\n    //       .then(handleDeleted);\n    //   }\n\n    //   function handleDeleted(response) {\n    //     console.log(response);\n    //   }","import React, { useState } from \"react\";\nimport {\n  Box,\n  Button,\n  Form,\n  FormField,\n  Heading,\n  Paragraph,\n  Text,\n  TextArea,\n  TextInput,\n} from \"grommet\";\nimport * as data from \"./data\";\nimport { authentication } from \"./utils\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  addFeatures,\n  // updateFeatures,\n  // deleteFeatures,\n} from \"@esri/arcgis-rest-feature-layer\";\n\nconst Popup = ({ pointRef, featureLayer, onClose, hasPoint }) => {\n  const [values, setValues] = useState({});\n\n  const point = pointRef.current;\n\n  // console.log(\"values\", values);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // console.log(\"submit\", values);\n\n    const featureToAdd = {\n      attributes: {\n        id: uuidv4(),\n        name: values.name,\n        note: values.note,\n      },\n      geometry: {\n        x: point.geometry.longitude,\n        y: point.geometry.latitude,\n        spatialReference: {\n          wkid: 4326,\n        },\n      },\n    };\n\n    console.log(featureToAdd);\n\n    addFeatures({\n      url: data.featureServiceLayerUrl,\n      features: [featureToAdd],\n      authentication,\n    }).then(handleAdded);\n\n    function handleAdded(response) {\n      console.log(\"added\", response);\n      if (response.addResults[0].success) {\n        featureLayer.refresh();\n        onClose();\n      }\n    }\n\n    // for (let i = 14; i < 71; i++) {\n\n    //   deleteFeatures({\n    //         url: data.featureServiceLayerUrl,\n    //         objectIds: [i],\n    //         authentication\n    //       })\n    //         .then(handleDeleted);\n\n    //     function handleDeleted(response) {\n    //       console.log(response);\n    //     }\n    // }\n  };\n\n  return (\n    <Box\n      style={{\n        width: \"350px\",\n      }}\n      tag='header'\n      direction='column'\n      align='center'\n      justify='between'\n      background='light-2'\n      pad={{ vertical: \"small\", horizontal: \"medium\" }}\n      elevation='medium'\n    >\n      <Heading size=\"20px\">Add a point</Heading>\n      <Paragraph size=\"small\" >click on the map to add a waypoint</Paragraph>\n      <Form\n        value={values}\n        onChange={(nextValue) => setValues(nextValue)}\n        onReset={() => setValues({})}\n        onSubmit={handleSubmit}\n        style={{ width: \"250px\" }}\n      >\n        <FormField name='name' htmlFor='name-input' required>\n          <TextInput\n            id='name-input'\n            placeholder='new point'\n            size='medium'\n            name='name'\n            value={values.name || \"\"}\n          />\n        </FormField>\n        <FormField name='note' htmlFor='note-input'>\n          <TextArea\n            id='note-input'\n            placeholder='add a note'\n            name='note'\n            value={values.note || \"\"}\n            resize={false}\n          />\n        </FormField>\n        <Box direction='row' gap='medium' justify='center'>\n          <Button color='primary' label='save' type='submit' disabled={!hasPoint} />\n          <Button\n            color='primary'\n            label='cancel'\n            type='reset'\n            onClick={onClose}\n          />\n        </Box>\n      </Form>\n      <Box pad='medium'>\n        { hasPoint && (\n          <Text size='small' textAlign='center'>\n            {`Coordinates: ${point.geometry.latitude.toFixed(\n              6\n            )}, ${point.geometry.longitude.toFixed(6)}`}\n          </Text>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Popup;\n","import React, { useRef, useEffect, useState} from \"react\";\n\nimport WebMap from \"@arcgis/core/WebMap\";\nimport MapView from \"@arcgis/core/views/MapView\";\nimport Graphic from \"@arcgis/core/Graphic\";\nimport GraphicsLayer from \"@arcgis/core/layers/GraphicsLayer\";\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\n// import { ApiKey } from \"@esri/arcgis-rest-auth\";\n// import { request } from \"@esri/arcgis-rest-request\";\n// import {\n//   addFeatures,\n//   updateFeatures,\n//   deleteFeatures,\n// } from \"@esri/arcgis-rest-feature-layer\";\nimport {\n  pointsLabels,\n  pointsRenderer,\n  popupPoints,\n  authentication,\n} from \"./utils\";\n\nimport * as data from \"./data\";\n\nimport Popup from \"./Popup\";\nimport { Button, Box, Heading } from \"grommet\";\n\nconst Map = () => {\n  const mapContainer = useRef();\n  const view = useRef();\n  const map = useRef();\n  const graphicsLayer = useRef();\n  const clickPoint = useRef(null);\n  const listeners = useRef([]);\n  const [showPointEditor, setShowPointEditor] = useState(false);\n  const [hasPoint, setHasPoint] = useState(false);\n\n  console.log('view', view.current)\n\n  const removePoint = () => {\n    graphicsLayer.current.remove(clickPoint.current);\n    clickPoint.current = null;\n    setHasPoint(false);\n  };\n\n  const handleClick = (event) => {\n    // console.log(event);\n    if (clickPoint.current === null) {\n      const { longitude, latitude } = event.mapPoint;\n      const coordinates = { longitude, latitude };\n      const point = new Graphic({\n        geometry: {\n          type: \"point\",\n          longitude: coordinates.longitude,\n          latitude: coordinates.latitude,\n        },\n        symbol: data.simpleMarkerSymbol,\n      });\n      // console.log(\"add\");\n      graphicsLayer.current.add(point);\n      clickPoint.current = point;\n      setShowPointEditor(true);\n      setHasPoint(true);\n    } else {\n      // console.log(\"remove\");\n      removePoint();\n    }\n  };\n\n  const addLayers = () => {\n    graphicsLayer.current = new GraphicsLayer();\n    map.current.add(graphicsLayer.current);\n    const featureLayer = new FeatureLayer({\n      url: data.featureServiceLayerUrl,\n      authentication,\n      renderer: pointsRenderer,\n      labelingInfo: [pointsLabels],\n      outFields: [\"name\", \"note\"],\n      popupTemplate: popupPoints,\n    });\n\n    map.current.add(featureLayer);\n\n    console.log(map.current.layers);\n  };\n\n  const handleClosePointEditor = () => {\n    clickPoint.current !== null && removePoint();\n    listeners.current[0].remove();\n    listeners.current.pop();\n    setShowPointEditor(false);\n  };\n\n  const handleOpenPointEditor = () => {\n    setShowPointEditor(true);\n    const listener = view.current.on(\"click\", handleClick);\n    listeners.current.push(listener);\n  };\n\n  useEffect(() => {\n    console.log(\"map.current\", map.current);\n    if (typeof map.current === \"undefined\") {\n\n      map.current = new WebMap({\n        portalItem: {\n          id: \"32332826c3444113bbc409cf7eaff5d5\",\n        }\n      });\n\n      view.current = new MapView({\n        container: mapContainer.current,\n        map: map.current,\n        center: [-110.30512354972593, 40.792249423721735],\n        zoom: 12,\n      });\n\n      view.current.when(\n        () => {\n          addLayers();\n        },\n        (e) => {\n          console.error(e);\n        }\n      );\n    }\n\n    return () => {\n      view.current && view.current.destroy();\n      map.current = undefined;\n    };\n  }, []);\n\n  return (\n    <div>\n      <Box style={{height: \"11vh\"}}>\n        <Heading size=\"30px\" margin={{left: \"small\"}}>divine</Heading>\n      </Box>\n      <div style={{ position: \"relative\" }}>\n        <div ref={mapContainer} style={{ height: \"89vh\" }} />\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"15px\",\n            right: \"15px\",\n            // width: \"350px\",\n          }}\n        >\n          {showPointEditor ? (\n            <Popup\n              pointRef={clickPoint}\n              featureLayer={view.current.layerViews.items[3]}\n              onClose={handleClosePointEditor}\n              hasPoint={hasPoint}\n            />\n          ) : (\n            <Box\n              background='light-2'\n              pad={{ vertical: \"small\", horizontal: \"medium\" }}\n              elevation='medium'\n            >\n              <Button\n                color='primary'\n                label='add a point'\n                onClick={handleOpenPointEditor}\n              />\n            </Box>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Map;\n","import React from 'react'\nimport Map from './MapView';\nimport './App.css'\n\nfunction App() {\n  return (\n    <Map />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { normalizeColor } from \"grommet/utils\";\nimport { rgba } from \"polished\";\n\nconst grommetTheme = {\n  global: {\n    colors: {\n      \"light-2\": \"#f5f5f5\",\n      text: {\n        light: \"rgba(0, 0, 0, 0.87)\",\n      },\n      primary: \"#303f9f\",\n    },\n    edgeSize: {\n      small: \"14px\",\n    },\n    elevation: {\n      light: {\n        medium:\n          \"0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\n      },\n    },\n    font: {\n      family: \"Roboto\",\n      size: \"14px\",\n      height: \"20px\",\n      color: \"green\",\n    },\n  },\n  button: {\n    border: {\n      width: \"1px\",\n      radius: \"4px\",\n    },\n    padding: {\n      vertical: \"8px\",\n      horizontal: \"16px\",\n    },\n    extend: (props) => `\n        text-transform: uppercase;\n        font-size: 0.875rem;\n        font-weight: 500;\n        line-height: normal;\n\n        ${\n          !props.primary &&\n          `\n        border-color: ${rgba(\n          normalizeColor(props.colorValue, props.theme),\n          0.5\n        )};\n        color: ${normalizeColor(props.colorValue, props.theme)};\n        :hover {\n        box-shadow: none;\n        background-color: ${rgba(\n          normalizeColor(props.colorValue, props.theme),\n          0.08\n        )};\n        }\n        `\n        }\n        `,\n  },\n};\n\nexport default grommetTheme;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"@arcgis/core/assets/esri/themes/dark/main.css\";\nimport esriConfig from \"@arcgis/core/config\";\nimport { Grommet } from 'grommet';\nimport grommetTheme from './theme';\n\n// esriConfig.apiKey = 'AAPK23f9bc16f71742209645bd6b7c7617f6pk58_Lrl1k0lsVNcjzx_jfu-OSaqTbHNOqZVL7lhtXXgQzDWAODub6CNQLaVCRzc';\nesriConfig.apiKey = process.env.REACT_APP_API_KEY;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Grommet theme={grommetTheme}>\n      <App />\n    </Grommet>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}