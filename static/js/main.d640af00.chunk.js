(this.webpackJsonpdivine=this.webpackJsonpdivine||[]).push([[47],{452:function(e,t,n){},454:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=454},466:function(e,t,n){},478:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(310),c=n.n(i),a=(n(452),n(26)),l=n(437),u=n(436),s=n(80),d=n(413),p=n(286),b={type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:1}},m="https://services3.arcgis.com/cVS7R33dvMF3bt2i/arcgis/rest/services/uinta_highline/FeatureServer/0",h=new(n(501).a)({key:"AAPK23f9bc16f71742209645bd6b7c7617f6pk58_Lrl1k0lsVNcjzx_jfu-OSaqTbHNOqZVL7lhtXXgQzDWAODub6CNQLaVCRzc"}),f={type:"simple",symbol:{type:"picture-marker",url:"http://static.arcgis.com/images/Symbols/NPS/npsPictograph_0231b.png",width:"18px",height:"18px"}},j={symbol:{type:"text",color:"#FFFFFF",haloColor:"#5E8D74",haloSize:"2px",font:{size:"12px",family:"Noto Sans",style:"italic",weight:"normal"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.name"}},x={title:"Waypoint",content:"<b>Waypoint:</b> {name}<br><b>Notes:</b> {note}"},g=n(510),O=n(511),y=n(512),v=n(516),w=n(504),z=n(508),k=n(514),C=n(506),F=n(513),R=n(419),S=n(505),L=n(66),N=function(e){var t=e.pointRef,n=e.featureLayer,o=e.onClose,i=e.hasPoint,c=Object(r.useState)({}),l=Object(a.a)(c,2),u=l[0],s=l[1],d=t.current;return Object(L.jsxs)(g.a,{style:{width:"350px"},tag:"header",direction:"column",align:"center",justify:"between",background:"light-2",pad:{vertical:"small",horizontal:"medium"},elevation:"medium",children:[Object(L.jsx)(O.a,{size:"20px",children:"Add a point"}),Object(L.jsx)(y.a,{size:"small",children:"click on the map to add a waypoint"}),Object(L.jsxs)(v.a,{value:u,onChange:function(e){return s(e)},onReset:function(){return s({})},onSubmit:function(e){e.preventDefault();var t={attributes:{id:Object(R.v4)(),name:u.name,note:u.note},geometry:{x:d.geometry.longitude,y:d.geometry.latitude,spatialReference:{wkid:4326}}};console.log(t),Object(S.a)({url:m,features:[t],authentication:h}).then((function(e){console.log("added",e),e.addResults[0].success&&(n.refresh(),o())}))},style:{width:"250px"},children:[Object(L.jsx)(w.a,{name:"name",htmlFor:"name-input",required:!0,children:Object(L.jsx)(z.a,{id:"name-input",placeholder:"new point",size:"medium",name:"name",value:u.name||""})}),Object(L.jsx)(w.a,{name:"note",htmlFor:"note-input",children:Object(L.jsx)(k.a,{id:"note-input",placeholder:"add a note",name:"note",value:u.note||"",resize:!1})}),Object(L.jsxs)(g.a,{direction:"row",gap:"medium",justify:"center",children:[Object(L.jsx)(C.a,{color:"primary",label:"save",type:"submit",disabled:!i}),Object(L.jsx)(C.a,{color:"primary",label:"cancel",type:"reset",onClick:o})]})]}),Object(L.jsx)(g.a,{pad:"medium",children:i&&Object(L.jsx)(F.a,{size:"small",textAlign:"center",children:"Coordinates: ".concat(d.geometry.latitude.toFixed(6),", ").concat(d.geometry.longitude.toFixed(6))})})]})},P=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useRef)(),i=Object(r.useRef)(null),c=Object(r.useRef)([]),y=Object(r.useState)(!1),v=Object(a.a)(y,2),w=v[0],z=v[1],k=Object(r.useState)(!1),F=Object(a.a)(k,2),R=F[0],S=F[1];console.log("view",t.current);var P=function(){o.current.remove(i.current),i.current=null,S(!1)},V=function(e){if(null===i.current){var t=e.mapPoint,n={longitude:t.longitude,latitude:t.latitude},r=new s.a({geometry:{type:"point",longitude:n.longitude,latitude:n.latitude},symbol:b});o.current.add(r),i.current=r,z(!0),S(!0)}else P()};return Object(r.useEffect)((function(){return console.log("map.current",n.current),"undefined"===typeof n.current&&(n.current=new l.a({portalItem:{id:"32332826c3444113bbc409cf7eaff5d5"}}),t.current=new u.a({container:e.current,map:n.current,center:[-110.30512354972593,40.792249423721735],zoom:12}),t.current.when((function(){!function(){o.current=new d.a,n.current.add(o.current);var e=new p.default({url:m,authentication:h,renderer:f,labelingInfo:[j],outFields:["name","note"],popupTemplate:x});n.current.add(e),console.log(n.current.layers)}()}),(function(e){console.error(e)}))),function(){t.current&&t.current.destroy(),n.current=void 0}}),[]),Object(L.jsxs)("div",{children:[Object(L.jsx)(g.a,{style:{height:"11vh"},children:Object(L.jsx)(O.a,{size:"30px",margin:{left:"small"},children:"divine"})}),Object(L.jsxs)("div",{style:{position:"relative"},children:[Object(L.jsx)("div",{ref:e,style:{height:"89vh"}}),Object(L.jsx)("div",{style:{position:"absolute",top:"15px",right:"15px"},children:w?Object(L.jsx)(N,{pointRef:i,featureLayer:t.current.layerViews.items[3],onClose:function(){null!==i.current&&P(),c.current[0].remove(),c.current.pop(),z(!1)},hasPoint:R}):Object(L.jsx)(g.a,{background:"light-2",pad:{vertical:"small",horizontal:"medium"},elevation:"medium",children:Object(L.jsx)(C.a,{color:"primary",label:"add a point",onClick:function(){z(!0);var e=t.current.on("click",V);c.current.push(e)}})})})]})]})};n(466);var V=function(){return Object(L.jsx)(P,{})},D=function(e){e&&e instanceof Function&&n.e(255).then(n.bind(null,949)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),i(e),c(e)}))},A=(n(467),n(67)),_=n(507),E=n(334),T=n(360),q={global:{colors:{"light-2":"#f5f5f5",text:{light:"rgba(0, 0, 0, 0.87)"},primary:"#303f9f"},edgeSize:{small:"14px"},elevation:{light:{medium:"0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)"}},font:{family:"Roboto",size:"14px",height:"20px",color:"green"}},button:{border:{width:"1px",radius:"4px"},padding:{vertical:"8px",horizontal:"16px"},extend:function(e){return"\n        text-transform: uppercase;\n        font-size: 0.875rem;\n        font-weight: 500;\n        line-height: normal;\n\n        ".concat(!e.primary&&"\n        border-color: ".concat(Object(T.a)(Object(E.normalizeColor)(e.colorValue,e.theme),.5),";\n        color: ").concat(Object(E.normalizeColor)(e.colorValue,e.theme),";\n        :hover {\n        box-shadow: none;\n        background-color: ").concat(Object(T.a)(Object(E.normalizeColor)(e.colorValue,e.theme),.08),";\n        }\n        "),"\n        ")}}};A.a.apiKey="AAPK23f9bc16f71742209645bd6b7c7617f6pk58_Lrl1k0lsVNcjzx_jfu-OSaqTbHNOqZVL7lhtXXgQzDWAODub6CNQLaVCRzc",c.a.render(Object(L.jsx)(o.a.StrictMode,{children:Object(L.jsx)(_.a,{theme:q,children:Object(L.jsx)(V,{})})}),document.getElementById("root")),D()}},[[478,48,49]]]);
//# sourceMappingURL=main.d640af00.chunk.js.map