{"version":3,"sources":["../node_modules/@arcgis/core/views/webgl/Texture.js","../node_modules/@arcgis/core/views/webgl/enums.js","../node_modules/@arcgis/core/views/webgl/programUtils.js","../node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js","../node_modules/@arcgis/core/views/webgl/ProgramCache.js","../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js","../node_modules/@arcgis/core/views/webgl.js"],"names":["r","t","e","a","this","_context","type","_glName","_descriptor","_samplingModeDirty","_wrapModeDirty","instanceCounter","increment","i","Texture","target","samplingMode","wrapMode","flipped","hasMipmap","isOpaque","unpackAlignment","preMultiplyAlpha","setData","gl","unbindTextureAllUnits","deleteTexture","decrement","dispose","width","height","createTexture","bindTexture","TEXTURE_UNIT_FOR_UPDATES","p","_validateTexture","pixelStorei","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","n","pixelFormat","h","internalFormat","ImageData","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","videoWidth","videoHeight","texImage2D","TEXTURE_2D","dataType","generateMipmap","console","error","DEPTH24_STENCIL8","DEPTH_STENCIL","s","o","Math","round","log","max","LN2","levels","length","min","compressedTexImage2D","_applySamplingMode","_applyWrapMode","_applyAnisotropicFilteringParameters","texSubImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","capabilities","textureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY","maxAnisotropy","Buffer","VAO","Program","Framebuffer","Renderbuffer","COUNT","toFixed","options","value","f","shaders","vertexShader","fragmentShader","attributes","window","WebGL2RenderingContext","_programCacheByTemplate","Map","_rctx","forEach","programs","has","addProgramTemplate","getProgramTemplateInstance","set","constructor","get","JSON","stringify","readFile","resolve","read","Error","exec","l","push","path","start","index","slice"],"mappings":"8JAI+MA,E,WAAE,WAAYC,EAAEC,GAAS,IAAPC,EAAO,uDAAL,KAAK,oBAACC,KAAKC,SAASJ,EAAEG,KAAKE,KAAK,UAAUF,KAAKG,QAAQ,KAAKH,KAAKI,iBAAY,EAAOJ,KAAKK,oBAAmB,EAAGL,KAAKM,gBAAe,EAAGT,EAAEU,gBAAgBC,UAAUC,IAAEC,QAAQV,MAAMA,KAAKI,YAAL,aAAkBO,OAAO,KAAKC,aAAa,KAAKC,SAAS,MAAMC,SAAQ,EAAGC,WAAU,EAAGC,UAAS,EAAGC,gBAAgB,EAAEC,kBAAiB,GAAMpB,GAAGE,KAAKmB,QAAQpB,G,wCAAG,WAAa,OAAOC,KAAKG,U,sBAAQ,WAAiB,OAAOH,KAAKI,c,qBAAY,WAAUJ,KAAKC,SAASmB,IAAIpB,KAAKG,UAAUH,KAAKC,SAASoB,sBAAsBrB,MAAMA,KAAKC,SAASmB,GAAGE,cAActB,KAAKG,SAASH,KAAKG,QAAQ,KAAKH,KAAKC,SAASM,gBAAgBgB,UAAUd,IAAEC,QAAQV,S,qBAAO,WAAUA,KAAKwB,Y,oBAAU,SAAO3B,EAAEC,GAAG,IAAMW,EAAET,KAAKI,YAAYK,EAAEgB,QAAQ5B,GAAGY,EAAEiB,SAAS5B,IAAIW,EAAEgB,MAAM5B,EAAEY,EAAEiB,OAAO5B,EAAEE,KAAKmB,QAAQ,S,qBAAO,SAAQtB,GAAG,GAAIG,KAAKC,UAAWD,KAAKC,SAASmB,GAAlC,CAA4C,IAAMX,EAAET,KAAKC,SAASmB,GAAGpB,KAAKG,UAAUH,KAAKG,QAAQM,EAAEkB,sBAAiB,IAAS9B,IAAIA,EAAE,MAAM,OAAOA,IAAIG,KAAKI,YAAYqB,MAAMzB,KAAKI,YAAYqB,OAA98B,EAAu9BzB,KAAKI,YAAYsB,OAAO1B,KAAKI,YAAYsB,QAAhgC,GAA2gC,IAAM3B,EAAEC,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,0BAA0BC,EAAE9B,KAAKI,YAAYR,EAAEmC,iBAAiB/B,KAAKC,SAAS6B,GAAGrB,EAAEuB,YAAYvB,EAAEwB,iBAAiBH,EAAEb,iBAAiBR,EAAEuB,YAAYvB,EAAEyB,oBAAoBJ,EAAEhB,QAAQ,EAAE,GAAGL,EAAEuB,YAAYvB,EAAE0B,+BAA+BL,EAAEZ,iBAAiB,EAAE,GAAG,IAAMkB,EAAEN,EAAEO,YAAgBC,EAAER,EAAES,eAAeT,EAAES,eAAeH,EAAE,GAAGvC,aAAa2C,WAAW3C,aAAa4C,kBAAkB5C,aAAa6C,mBAAmB7C,aAAa8C,iBAAiB,CAAC,IAAI7C,EAAED,EAAE4B,MAAM1B,EAAEF,EAAE6B,OAAO7B,aAAa8C,mBAAmB7C,EAAED,EAAE+C,WAAW7C,EAAEF,EAAEgD,aAAaf,EAAEL,OAAOK,EAAEJ,OAAOjB,EAAEqC,WAAWrC,EAAEsC,WAAW,EAAET,EAAEF,EAAEN,EAAEkB,SAASnD,GAAGiC,EAAEf,WAAWf,KAAKiD,sBAAiB,IAASnB,EAAEL,QAAQK,EAAEL,MAAM3B,QAAG,IAASgC,EAAEJ,SAASI,EAAEJ,OAAO3B,OAAO,CAAC,MAAM+B,EAAEL,OAAO,MAAMK,EAAEJ,QAAQwB,QAAQC,MAAM,uCAAuC1C,EAAE2C,kBAAkBd,IAAI7B,EAAE4C,gBAAgBf,EAAE7B,EAAE2C,kBAAkB,IAAIrD,EAAE+B,EAAEL,MAAM6B,EAAExB,EAAEJ,OAAO,GAA2uH,SAAW7B,GAAG,OAAOC,YAAED,IAAI,SAASA,GAAG,eAAeA,EAAEK,KAAhyHqD,CAAE1D,GAAG,CAAC,IAAMC,EAAE0D,KAAKC,MAAMD,KAAKE,IAAIF,KAAKG,IAAI5D,EAAEuD,IAAIE,KAAKI,KAAK,EAAE9B,EAAEf,UAAUe,EAAEf,WAAWjB,IAAID,EAAEgE,OAAOC,OAAO,IAAI,IAAIlE,EAAE,KAAKA,EAAE,CAAC,IAAME,EAAED,EAAEgE,OAAOL,KAAKO,IAAInE,EAAEC,EAAEgE,OAAOC,OAAO,IAAI,GAAGrD,EAAEuD,qBAAqBvD,EAAEsC,WAAWnD,EAAE0C,EAAEvC,EAAEuD,EAAE,EAAExD,GAAG,IAAIC,GAAG,IAAIuD,IAAIxB,EAAEf,UAAU,MAAMhB,EAAEyD,KAAKG,IAAI,EAAE5D,GAAG,GAAGuD,EAAEE,KAAKG,IAAI,EAAEL,GAAG,SAAS,GAAGxD,YAAED,GAAGY,EAAEqC,WAAWrC,EAAEsC,WAAW,EAAET,EAAEvC,EAAEuD,EAAE,EAAElB,EAAEN,EAAEkB,SAASnD,GAAGiC,EAAEf,WAAWf,KAAKiD,sBAAsB,IAAI,IAAIpD,EAAE,EAAEY,EAAEqC,WAAWrC,EAAEsC,WAAWlD,EAAEyC,EAAEvC,EAAEuD,EAAE,EAAElB,EAAEN,EAAEkB,SAAS,OAAO,IAAIjD,GAAG,IAAIuD,IAAIxB,EAAEf,YAAYlB,EAAEE,EAAEyD,KAAKG,IAAI,EAAE5D,GAAG,GAAGuD,EAAEE,KAAKG,IAAI,EAAEL,GAAG,GAAG1D,EAAEqE,mBAAmBxD,EAAET,KAAKI,aAAaR,EAAEsE,eAAezD,EAAET,KAAKI,aAAaR,EAAEuE,qCAAqCnE,KAAKC,SAASD,KAAKI,aAAaJ,KAAKC,SAAS2B,YAAY7B,EAAEH,EAAEiC,6B,wBAA0B,SAAWhC,EAAEC,EAAEW,EAAEV,EAAEuD,EAAEC,GAAGA,GAAGL,QAAQC,MAAM,yCAAyCnD,KAAKG,SAAS+C,QAAQC,MAAM,+CAA+C,IAAMrB,EAAE9B,KAAKC,SAASmB,GAAGgB,EAAEpC,KAAKI,YAAYkC,EAAEtC,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,2BAA2B/B,EAAE,GAAGW,EAAE,GAAGV,EAAEqC,EAAEX,OAAO6B,EAAElB,EAAEV,QAAQ5B,EAAEC,EAAEqC,EAAEX,OAAOhB,EAAE6C,EAAElB,EAAEV,SAASwB,QAAQC,MAAM,sDAAsDrB,EAAEE,YAAYF,EAAEG,iBAAiBG,EAAEnB,iBAAiBa,EAAEE,YAAYF,EAAEI,oBAAoBE,EAAEtB,QAAQ,EAAE,GAAGgB,EAAEE,YAAYF,EAAEK,+BAA+BC,EAAElB,iBAAiB,EAAE,GAAGqC,aAAaf,WAAWe,aAAad,kBAAkBc,aAAab,mBAAmBa,aAAaZ,iBAAiBb,EAAEsC,cAActC,EAAEiB,WAAWlD,EAAEC,EAAEW,EAAE2B,EAAEC,YAAYD,EAAEY,SAASO,GAAGzB,EAAEsC,cAActC,EAAEiB,WAAWlD,EAAEC,EAAEW,EAAEV,EAAEuD,EAAElB,EAAEC,YAAYD,EAAEY,SAASO,GAAGvD,KAAKC,SAAS2B,YAAYU,EAAE1C,EAAEiC,4B,4BAA0B,WAAiB,IAAMhC,EAAEG,KAAKI,YAAYP,EAAEkB,YAAYlB,EAAEkB,WAAU,EAAGf,KAAKK,oBAAmB,EAAGT,EAAEmC,iBAAiB/B,KAAKC,SAASJ,IAAI,OAAOA,EAAEe,cAAcZ,KAAKK,oBAAmB,EAAGR,EAAEe,aAAa,MAAM,OAAOf,EAAEe,eAAeZ,KAAKK,oBAAmB,EAAGR,EAAEe,aAAa,MAAM,IAAMd,EAAEE,KAAKC,SAAS2B,YAAY5B,KAAKJ,EAAEiC,0BAA0BpB,EAAET,KAAKC,SAASmB,GAAGX,EAAEwC,eAAexC,EAAEsC,YAAY/C,KAAKC,SAAS2B,YAAY9B,EAAEF,EAAEiC,4B,6BAA0B,SAAgBhC,GAAGA,IAAIG,KAAKI,YAAYQ,eAAeZ,KAAKI,YAAYQ,aAAaf,EAAEG,KAAKK,oBAAmB,K,yBAAI,SAAYR,GAAGA,IAAIG,KAAKI,YAAYS,WAAWb,KAAKI,YAAYS,SAAShB,EAAED,EAAEmC,iBAAiB/B,KAAKC,SAASD,KAAKI,aAAaJ,KAAKM,gBAAe,K,0BAAI,WAAe,IAAMT,EAAEG,KAAKC,SAASmB,GAAGtB,EAAEE,KAAKI,YAAYJ,KAAKK,qBAAqBT,EAAEqE,mBAAmBpE,EAAEC,GAAGE,KAAKK,oBAAmB,GAAIL,KAAKM,iBAAiBV,EAAEsE,eAAerE,EAAEC,GAAGE,KAAKM,gBAAe,M,+BAAI,SAAwBR,EAAEW,IAAIA,EAAEgB,MAAM,GAAGhB,EAAEiB,OAAO,IAAIwB,QAAQC,MAAM,kDAAkD,IAAMG,EAAEzD,YAAEY,EAAEgB,QAAQ5B,YAAEY,EAAEiB,QAAQ3B,YAAED,EAAEsB,KAAKkC,IAAI,iBAAiB7C,EAAEI,SAAS,QAAQJ,EAAEI,UAAUqC,QAAQC,MAAM,qEAAqE,QAAQ1C,EAAEI,SAASyC,GAAG,QAAQ7C,EAAEI,SAAShB,GAAGqD,QAAQC,MAAM,qEAAqE1C,EAAEM,WAAWmC,QAAQC,MAAM,iD,gCAA+C,SAA0BtD,EAAEC,GAAG,IAAIW,EAAEX,EAAEc,aAAab,EAAED,EAAEc,aAAa,OAAOH,GAAG,OAAOA,GAAGA,EAAE,KAAKX,EAAEiB,YAAYhB,EAAE,OAAO,OAAOU,GAAG,OAAOA,IAAIA,EAAE,KAAKX,EAAEiB,YAAYhB,EAAE,OAAOF,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAEyE,mBAAmB7D,GAAGZ,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE0E,mBAAmBxE,K,4BAAG,SAAsBF,EAAEC,GAAG,iBAAiBA,EAAEe,UAAUhB,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE2E,eAAe1E,EAAEe,UAAUhB,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE4E,eAAe3E,EAAEe,YAAYhB,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE2E,eAAe1E,EAAEe,SAASyC,GAAGzD,EAAEwE,cAAcxE,EAAEkD,WAAWlD,EAAE4E,eAAe3E,EAAEe,SAAShB,M,kDAAI,SAA4CA,EAAEC,GAAG,IAAIW,EAAQV,EAAEF,EAAE6E,aAAaC,yBAAyB,GAAI5E,EAAJ,CAAa,IAAMuD,EAAEzD,EAAEuB,GAAGkC,EAAEsB,cAActB,EAAEP,WAAWhD,EAAE8E,uBAAuB,OAAOpE,EAAEX,EAAEgF,eAAerE,EAAE,Q,KAAiEb,EAAEiC,yBAAyB,EAAiBjC,O,iCCJn7L,oEAIA,IAAkBE,EAAZF,EAAE,OAAa,SAASA,GAAGA,EAAEA,EAAEc,QAAQ,GAAG,UAAUd,EAAEA,EAAEmF,OAAO,GAAG,SAASnF,EAAEA,EAAEoF,IAAI,GAAG,MAAMpF,EAAEA,EAAEqF,QAAQ,GAAG,UAAUrF,EAAEA,EAAEsF,YAAY,GAAG,cAActF,EAAEA,EAAEuF,aAAa,GAAG,eAAevF,EAAEA,EAAEwF,MAAM,GAAG,QAAvL,CAAgMtF,IAAIA,EAAE,M,iCCJ3N,iFAIuC,SAASsC,EAAEtC,GAAG,IAAIsC,EAAE,GAAG,IAAI,IAAMvC,KAAKC,EAAE,CAAC,IAAMyD,EAAEzD,EAAED,GAAG,GAAG,kBAAkB0D,EAAEA,IAAInB,GAAC,kBAAavC,EAAb,YAAyB,GAAG,iBAAiB0D,EAAEnB,GAAC,kBAAavC,EAAb,YAAkB0D,EAAE8B,UAApB,WAAuC,GAAG,iBAAiB9B,EAAE,CAAC,IAAMzD,EAAEyD,EAAE+B,QAAY1F,EAAE,EAAE,IAAI,IAAMC,KAAKC,EAAEsC,GAAC,kBAAatC,EAAED,GAAf,aAAsBD,KAAKyF,UAA3B,MAAyCjD,GAAC,kBAAavC,EAAb,YAAkBC,EAAEyD,EAAEgC,OAAtB,OAAkC,OAAOnD,EAAE,SAASvC,EAAEuC,EAAEvC,EAAE0D,EAAE3D,GAAG2D,EAAEA,GAAG,GAAG3D,EAAEA,GAAG,GAAG,IAAM4F,EAAE,mBAAmB3F,EAAE4F,QAAQ5F,EAAE4F,QAAQlC,GAAG1D,EAAE4F,QAAQ,OAAO,IAAI3F,IAAEsC,EAAExC,EAAE4F,EAAEE,aAAa9F,EAAE4F,EAAEG,eAAe9F,EAAE+F,c,iCCA/YxD,IAA9G,SAAWA,GAAG,OAAOyD,OAAOC,wBAAwB1D,aAAayD,OAAOC,yB,4DCAhBjG,E,WAAE,WAAYD,GAAE,oBAACI,KAAK+F,wBAAwB,IAAIC,IAAIhG,KAAKiG,MAAMrG,E,2CAAE,WAAUI,KAAK+F,wBAAwBG,SAAS,SAAAtG,GAAC,OAAEA,EAAEuG,SAASD,SAAS,SAAAtG,GAAC,OAAEA,EAAE4B,gBAAcxB,KAAK+F,wBAAwB,O,wBAAK,SAAWlG,EAAEE,GAAE,WAAC,OAAOC,KAAK+F,wBAAwBK,IAAIvG,IAAIG,KAAKqG,mBAAmBxG,GAAG,SAAAE,GAAC,OAAEH,YAAE,EAAKqG,MAAMpG,EAAEE,MAAKC,KAAKsG,2BAA2BzG,EAAEE,K,gCAAG,SAAmBH,EAAEC,GAAGG,KAAK+F,wBAAwBQ,IAAI3G,EAAE,CAAC4G,YAAY3G,EAAEsG,SAAS,IAAIH,Q,wCAAM,SAA2BpG,EAAEC,GAAG,IAAME,EAAEC,KAAK+F,wBAAwBU,IAAI7G,GAAG,GAAGG,EAAE,CAAC,IAAMH,EAAEC,EAAE6G,KAAKC,UAAU9G,GAAG,UAAU,IAAIE,EAAEoG,SAASC,IAAIxG,GAAG,CAAC,IAAME,EAAEC,EAAEyG,YAAY3G,GAAGE,EAAEoG,SAASI,IAAI3G,EAAEE,GAAG,OAAOC,EAAEoG,SAASM,IAAI7G,GAAG,OAAO,S,KAAqBC,O,mDCAltBC,E,WAAE,WAAYA,GAAE,oBAACE,KAAK4G,SAAS9G,E,mDAAE,SAAgBA,GAAG,OAAOE,KAAK6G,QAAQ/G,K,qBAAG,SAAQA,GAAY,WAAVD,EAAU,uDAAR,IAAImG,IAAK,GAAGnG,EAAEuG,IAAItG,GAAG,OAAOD,EAAE4G,IAAI3G,GAAG,IAAMF,EAAEI,KAAK8G,KAAKhH,GAAG,IAAIF,EAAE,MAAM,IAAImH,MAAJ,kCAAqCjH,IAAgF,IAA3E,IAAMwD,EAAE,wCAA4ClB,EAAEkB,EAAE0D,KAAKpH,GAASqH,EAAE,GAAQ,MAAM7E,GAAG6E,EAAEC,KAAK,CAACC,KAAK/E,EAAE,GAAGgF,MAAMhF,EAAEiF,MAAMvD,OAAO1B,EAAE,GAAG0B,SAAS1B,EAAEkB,EAAE0D,KAAKpH,GAAG,IAAIG,EAAE,EAAEuC,EAAE,GAAG,OAAO2E,EAAEf,SAAS,SAAApG,GAAIwC,GAAG1C,EAAE0H,MAAMvH,EAAED,EAAEsH,OAAO9E,GAAGzC,EAAEuG,IAAItG,EAAEqH,MAAM,GAAG,EAAKN,QAAQ/G,EAAEqH,KAAKtH,GAAGE,EAAED,EAAEsH,MAAMtH,EAAEgE,UAAUxB,GAAG1C,EAAE0H,MAAMvH,GAAGF,EAAE0G,IAAIzG,EAAEwC,GAAGA,I,kBAAE,SAAKxC,GAAG,OAAOE,KAAK4G,SAAS9G,O,KAAmBA,O,iCCJ5iB","file":"static/js/31.83c8f958.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isPowerOfTwo as t}from\"../../core/mathUtils.js\";import{isSome as e}from\"../../core/maybe.js\";import{ResourceType as i}from\"./enums.js\";import a from\"./capabilities/isWebGL2Context.js\";const s=4;class r{constructor(t,e,a=null){this._context=t,this.type=\"texture\",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(i.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},this.setData(a)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(i.Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,this.setData(null))}setData(t){if(!this._context||!this._context.gl)return;const i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||s,this._descriptor.height=this._descriptor.height||s);const a=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),p=this._descriptor;r._validateTexture(this._context,p),i.pixelStorei(i.UNPACK_ALIGNMENT,p.unpackAlignment),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,p.flipped?1:0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.preMultiplyAlpha?1:0);const n=p.pixelFormat;let h=p.internalFormat?p.internalFormat:n;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let e=t.width,a=t.height;t instanceof HTMLVideoElement&&(e=t.videoWidth,a=t.videoHeight),p.width&&p.height,i.texImage2D(i.TEXTURE_2D,0,h,n,p.dataType,t),p.hasMipmap&&this.generateMipmap(),void 0===p.width&&(p.width=e),void 0===p.height&&(p.height=a)}else{null!=p.width&&null!=p.height||console.error(\"Width and height must be specified!\"),i.DEPTH24_STENCIL8&&h===i.DEPTH_STENCIL&&(h=i.DEPTH24_STENCIL8);let a=p.width,s=p.height;if(o(t)){const e=Math.round(Math.log(Math.max(a,s))/Math.LN2)+1;p.hasMipmap=p.hasMipmap&&e===t.levels.length;for(let r=0;;++r){const e=t.levels[Math.min(r,t.levels.length-1)];if(i.compressedTexImage2D(i.TEXTURE_2D,r,h,a,s,0,e),1===a&&1===s||!p.hasMipmap)break;a=Math.max(1,a>>1),s=Math.max(1,s>>1)}}else if(e(t))i.texImage2D(i.TEXTURE_2D,0,h,a,s,0,n,p.dataType,t),p.hasMipmap&&this.generateMipmap();else for(let t=0;i.texImage2D(i.TEXTURE_2D,t,h,a,s,0,n,p.dataType,null),(1!==a||1!==s)&&p.hasMipmap;++t)a=Math.max(1,a>>1),s=Math.max(1,s>>1)}r._applySamplingMode(i,this._descriptor),r._applyWrapMode(i,this._descriptor),r._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(a,r.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,a,s,o){o||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._context.gl,n=this._descriptor,h=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||a>n.width||s>n.height||e+a>n.width||i+s>n.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),p.pixelStorei(p.UNPACK_ALIGNMENT,n.unpackAlignment),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha?1:0),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?p.texSubImage2D(p.TEXTURE_2D,t,e,i,n.pixelFormat,n.dataType,o):p.texSubImage2D(p.TEXTURE_2D,t,e,i,a,s,n.pixelFormat,n.dataType,o),this._context.bindTexture(h,r.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,r._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,r.TEXTURE_UNIT_FOR_UPDATES),i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(e,r.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,r._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(r._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(r._applyWrapMode(t,e),this._wrapModeDirty=!1)}static _validateTexture(e,i){(i.width<0||i.height<0)&&console.error(\"Negative dimension parameters are not allowed!\");const s=t(i.width)&&t(i.height);a(e.gl)||s||(\"number\"==typeof i.wrapMode?33071!==i.wrapMode&&console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"):33071===i.wrapMode.s&&33071===i.wrapMode.t||console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"),i.hasMipmap&&console.error(\"Mipmapping requires power-of-two textures!\"))}static _applySamplingMode(t,e){let i=e.samplingMode,a=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(a=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(a=9728)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a)}static _applyWrapMode(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const a=t.capabilities.textureFilterAnisotropic;if(!a)return;const s=t.gl;s.texParameterf(s.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function o(t){return e(t)&&\"type\"in t&&\"compressed\"===t.type}r.TEXTURE_UNIT_FOR_UPDATES=0;export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst r=33984;var e;!function(r){r[r.Texture=0]=\"Texture\",r[r.Buffer=1]=\"Buffer\",r[r.VAO=2]=\"VAO\",r[r.Program=3]=\"Program\",r[r.Framebuffer=4]=\"Framebuffer\",r[r.Renderbuffer=5]=\"Renderbuffer\",r[r.COUNT=6]=\"COUNT\"}(e||(e={}));const f=33306;export{r as BASE_TEXTURE_UNIT,f as DepthStencilAttachment,e as ResourceType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Program as e}from\"./Program.js\";function n(e){let n=\"\";for(const t in e){const o=e[t];if(\"boolean\"==typeof o)o&&(n+=`#define ${t}\\n`);else if(\"number\"==typeof o)n+=`#define ${t} ${o.toFixed()}\\n`;else if(\"object\"==typeof o){const e=o.options;let r=0;for(const t in e)n+=`#define ${e[t]} ${(r++).toFixed()}\\n`;n+=`#define ${t} ${e[o.value]}\\n`}}return n}function t(n,t,o,r){o=o||{},r=r||\"\";const f=\"function\"==typeof t.shaders?t.shaders(o):t.shaders;return new e(n,r+f.vertexShader,r+f.fragmentShader,t.attributes)}export{t as createProgram,n as glslifyDefineMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createProgram as r}from\"./programUtils.js\";class t{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach((r=>r.programs.forEach((r=>r.dispose())))),this._programCacheByTemplate=null}getProgram(t,a){return this._programCacheByTemplate.has(t)||this.addProgramTemplate(t,(a=>r(this._rctx,t,a))),this.getProgramTemplateInstance(t,a)}addProgramTemplate(r,t){this._programCacheByTemplate.set(r,{constructor:t,programs:new Map})}getProgramTemplateInstance(r,t){const a=this._programCacheByTemplate.get(r);if(a){const r=t?JSON.stringify(t):\"default\";if(!a.programs.has(r)){const e=a.constructor(t);a.programs.set(r,e)}return a.programs.get(r)}return null}}export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\\S\\n]*#include\\s+<(\\S+)>[^\\S\\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h=\"\";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?\"\":this.resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}read(e){return this.readFile(e)}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nexport{default as BufferObject}from\"./webgl/BufferObject.js\";export{default as FramebufferObject}from\"./webgl/FramebufferObject.js\";export{Program}from\"./webgl/Program.js\";export{default as ProgramCache}from\"./webgl/ProgramCache.js\";export{default as Renderbuffer}from\"./webgl/Renderbuffer.js\";export{default as RenderingContext}from\"./webgl/RenderingContext.js\";export{default as ShaderCompiler}from\"./webgl/ShaderCompiler.js\";export{default as Texture}from\"./webgl/Texture.js\";export{default as VertexArrayObject}from\"./webgl/VertexArrayObject.js\";export{createProgram,glslifyDefineMap}from\"./webgl/programUtils.js\";export{createContextOrErrorHTML}from\"./webgl/context-util.js\";\n"],"sourceRoot":""}